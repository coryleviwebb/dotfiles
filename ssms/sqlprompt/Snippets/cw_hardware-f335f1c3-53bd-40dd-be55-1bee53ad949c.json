{
  "id": "f335f1c3-53bd-40dd-be55-1bee53ad949c",
  "prefix": "cw_hardware",
  "description": "Hardware information from SQL Server 2022",
  "body": "-- SQL Server Process Address space info  (Query 6) (Process Memory)\r\n-- (shows whether locked pages is enabled, among other things)\r\nSELECT\r\n    cpu_count AS [Logical CPU Count],\r\n    scheduler_count,\r\n    (socket_count * cores_per_socket) AS [Physical Core Count],\r\n    socket_count AS [Socket Count],\r\n    cores_per_socket,\r\n    numa_node_count,\r\n    physical_memory_kb / 1024 AS [Physical Memory (MB)],\r\n    max_workers_count AS [Max Workers Count],\r\n    affinity_type_desc AS [Affinity Type],\r\n    sqlserver_start_time AS [SQL Server Start Time],\r\n    DATEDIFF( HOUR, sqlserver_start_time, GETDATE()) AS [SQL Server Up Time (hrs)],\r\n    virtual_machine_type_desc AS [Virtual Machine Type],\r\n    softnuma_configuration_desc AS [Soft NUMA Configuration],\r\n    sql_memory_model_desc,\r\n    container_type_desc,\r\n    physical_memory_in_use_kb / 1024 AS [SQL Server Memory Usage (MB)],\r\n    locked_page_allocations_kb / 1024 AS [SQL Server Locked Pages Allocation (MB)],\r\n    large_page_allocations_kb / 1024 AS [SQL Server Large Pages Allocation (MB)],\r\n    page_fault_count,\r\n    memory_utilization_percentage,\r\n    available_commit_limit_kb,\r\n    process_physical_memory_low,\r\n    process_virtual_memory_low\r\nFROM\r\n    sys.dm_os_process_memory PM\r\n    CROSS JOIN sys.dm_os_sys_info;"
}